\doxysection{signal\+\_\+generator.\+h}
\label{signal__generator_8h_source}\index{C:/Users/johan/OneDrive -\/ Universidad de Antioquia/Semestre VII/Elec. Digital III/Laboratorio/Practica\_3/digital\_signal\_generator/polling\_c/signal\_generator.h@{C:/Users/johan/OneDrive -\/ Universidad de Antioquia/Semestre VII/Elec. Digital III/Laboratorio/Practica\_3/digital\_signal\_generator/polling\_c/signal\_generator.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#ifndef\ \_\_SIGNAL\_GENERATOR\_}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#define\ \_\_SIGNAL\_GENERATOR\_}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#define\ M\_PI\ \ \ \ \ \ \ \ 3.14159265358979323846\ \ }\textcolor{comment}{/*\ pi\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ S\_TO\_US\ \ \ \ \ 1000000}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#define\ US\_TO\_S\ \ \ \ \ 0.000001}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ SAMPLE\ \ \ \ \ \ 70\ }\textcolor{comment}{//\ Number\ of\ points\ in\ the\ signal.}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <math.h>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}hardware/timer.h"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}time\_base.h"{}}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}\{}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{struct}\{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ uint8\_t\ ss\ \ \ \ \ \ :\ 2;\ \textcolor{comment}{//\ 0:\ Sinusoidal,\ 1:\ Triangular,\ 2:\ Saw\ tooth,\ 3:\ Square}}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ uint8\_t\ en\ \ \ \ \ \ :\ 1;\ \textcolor{comment}{//\ Enable\ signal\ generation}}
\DoxyCodeLine{00035\ \ \ \ \ \}STATE;}
\DoxyCodeLine{00036\ \ \ \ \ uint32\_t\ freq;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Signal\ frequency}}
\DoxyCodeLine{00037\ \ \ \ \ uint16\_t\ amp;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Signal\ amplitude}}
\DoxyCodeLine{00038\ \ \ \ \ uint16\_t\ offset;\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Signal\ offset}}
\DoxyCodeLine{00039\ \ \ \ \ int16\_t\ value;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Signal\ value}}
\DoxyCodeLine{00040\ \ \ \ \ int16\_t\ arrayV[SAMPLE];\ \textcolor{comment}{//\ Array\ to\ store\ the\ signal\ values\ for\ the\ DAC}}
\DoxyCodeLine{00041\ \ \ \ \ uint8\_t\ cnt;\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Time\ variable}}
\DoxyCodeLine{00042\ \ \ \ \ time\_base\_t\ tb\_gen;\ \ \ \ \ \textcolor{comment}{//\ Time\ base\ for\ signal\ generation}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \}signal\_t;}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00055\ \textcolor{keywordtype}{void}\ signal\_gen\_init(signal\_t\ *signal,\ uint32\_t\ freq,\ uint16\_t\ amp,\ uint16\_t\ offset,\ \textcolor{keywordtype}{bool}\ en);}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00058\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ GETTING\ WAVE\ VALUES\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00059\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00066\ \textcolor{keywordtype}{void}\ signal\_calculate(signal\_t\ *signal);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00074\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ signal\_gen\_sin(signal\_t\ *signal,\ uint8\_t\ t)}
\DoxyCodeLine{00075\ \{}
\DoxyCodeLine{00076\ \ \ \ \ signal-\/>value\ =\ (int16\_t)(signal-\/>offset\ +\ signal-\/>amp*sin((2*M\_PI*t)/SAMPLE));}
\DoxyCodeLine{00077\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00085\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ signal\_gen\_tri(signal\_t\ *signal,\ uint8\_t\ t)}
\DoxyCodeLine{00086\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{if}\ (t\ <=\ SAMPLE/2)\{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ signal-\/>value\ =\ (int16\_t)(signal-\/>offset\ +\ (4*signal-\/>amp*t)/SAMPLE\ -\/\ signal-\/>amp);}
\DoxyCodeLine{00089\ \ \ \ \ \}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ signal-\/>value\ =\ (int16\_t)(signal-\/>offset\ -\/\ (4*signal-\/>amp*t)/SAMPLE\ +\ 3*signal-\/>amp);\ \ }
\DoxyCodeLine{00092\ \ \ \ \ \}}
\DoxyCodeLine{00093\ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00101\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ signal\_gen\_saw(signal\_t\ *signal,\ uint8\_t\ t)}
\DoxyCodeLine{00102\ \{}
\DoxyCodeLine{00103\ \ \ \ \ signal-\/>value\ =\ (int16\_t)(signal-\/>offset\ +\ (2*signal-\/>amp*t)/SAMPLE\ \ -\/\ signal-\/>amp);}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00112\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ signal\_gen\_sqr(signal\_t\ *signal,\ uint8\_t\ t)}
\DoxyCodeLine{00113\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{if}\ (t\ <=\ SAMPLE/2)\{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ signal-\/>value\ =\ (int16\_t)(signal-\/>offset\ +\ signal-\/>amp);}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ signal-\/>value\ =\ (int16\_t)(signal-\/>offset\ -\/\ signal-\/>amp);}
\DoxyCodeLine{00119\ \ \ \ \ \}}
\DoxyCodeLine{00120\ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00123\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ int16\_t\ signal\_get\_value(signal\_t\ *signal)\{}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{return}\ signal-\/>value;}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ signal\_set\_state(signal\_t\ *signal,\ uint8\_t\ ss)\{}
\DoxyCodeLine{00130\ \ \ \ \ signal-\/>STATE.ss\ =\ ss;}
\DoxyCodeLine{00131\ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ signal\_set\_amp(signal\_t\ *signal,\ uint16\_t\ amp)\{}
\DoxyCodeLine{00134\ \ \ \ \ signal-\/>amp\ =\ amp;}
\DoxyCodeLine{00135\ \}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ signal\_set\_offset(signal\_t\ *signal,\ uint16\_t\ offset)\{}
\DoxyCodeLine{00138\ \ \ \ \ signal-\/>offset\ =\ offset;}
\DoxyCodeLine{00139\ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ signal\_set\_freq(signal\_t\ *signal,\ uint32\_t\ freq)\{}
\DoxyCodeLine{00142\ \ \ \ \ signal-\/>freq\ =\ freq;}
\DoxyCodeLine{00143\ \ \ \ \ tb\_set\_delta(\&signal-\/>tb\_gen,S\_TO\_US/(SAMPLE*freq));\ \textcolor{comment}{//\ Nyquist\ theorem}}
\DoxyCodeLine{00144\ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ signal\_gen\_enable(signal\_t\ *signal)\{}
\DoxyCodeLine{00147\ \ \ \ \ signal-\/>STATE.en\ =\ 1;}
\DoxyCodeLine{00148\ \ \ \ \ tb\_enable(\&signal-\/>tb\_gen);}
\DoxyCodeLine{00149\ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ signal\_gen\_disable(signal\_t\ *signal)\{}
\DoxyCodeLine{00152\ \ \ \ \ signal-\/>STATE.en\ =\ 0;}
\DoxyCodeLine{00153\ \ \ \ \ tb\_disable(\&signal-\/>tb\_gen);}
\DoxyCodeLine{00154\ \}}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_\_SIGNAL\_GENERATOR\_}}

\end{DoxyCode}
