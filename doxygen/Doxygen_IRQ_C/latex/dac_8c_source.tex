\doxysection{dac.\+c}
\hypertarget{dac_8c_source}{}\label{dac_8c_source}\index{C:/Users/johan/OneDrive -\/ Universidad de Antioquia/Semestre VII/Elec. Digital III/Laboratorio/Practica\_3/digital\_signal\_generator/irq\_c/dac.c@{C:/Users/johan/OneDrive -\/ Universidad de Antioquia/Semestre VII/Elec. Digital III/Laboratorio/Practica\_3/digital\_signal\_generator/irq\_c/dac.c}}
\mbox{\hyperlink{dac_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00010}00010\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00011}00011\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00012}00012\ \textcolor{preprocessor}{\#include\ <stdbool.h>}}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00013}00013\ \textcolor{preprocessor}{\#include\ "{}hardware/gpio.h"{}}}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00014}00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{dac_8h}{dac.h}}"{}}}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00017}\mbox{\hyperlink{dac_8c_ac0c44732041f96979f2e33650eae8fac}{00017}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{dac_8c_ac0c44732041f96979f2e33650eae8fac}{dac\_init}}(\mbox{\hyperlink{structdac__t}{dac\_t}}\ *dac,\ uint8\_t\ gpio\_lsb,\ \textcolor{keywordtype}{bool}\ en)}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00018}00018\ \{}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00019}00019\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}}\ =\ gpio\_lsb;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00020}00020\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_af8f00468446d5b744b7e51d97ee36ed3}{digit\_v}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00021}00021\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_a6615bd80205b361bf6f3ffee9f537fd1}{en}}\ =\ en;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00023}00023\ \ \ \ \ gpio\_init\_mask(0x000000FF\ <<\ dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}});}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00024}00024\ \ \ \ \ gpio\_set\_dir\_masked(0x000000FF\ <<\ dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}},\ 0x000000FF\ <<\ dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}});\ \textcolor{comment}{//\ Set\ all\ gpios\ as\ outputs}}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00025}00025\ \}}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00027}\mbox{\hyperlink{dac_8c_a2c3455bf08fef634c9b6999a5b2d44e7}{00027}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{dac_8c_a2c3455bf08fef634c9b6999a5b2d44e7}{dac\_calculate}}(\mbox{\hyperlink{structdac__t}{dac\_t}}\ *dac,\ int16\_t\ decim\_v)}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00028}00028\ \{}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00029}00029\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_af8f00468446d5b744b7e51d97ee36ed3}{digit\_v}}\ =\ (decim\_v\ +\ (int16\_t)\mbox{\hyperlink{dac_8h_ad8517f59474c002252b8f2d5896d4ad2}{DAC\_BIAS}}\ +\ 5000)*\mbox{\hyperlink{dac_8h_a95d55ebfa2f2f1bd14867ad6a6cc9bfb}{RESOLUTION}}/\mbox{\hyperlink{dac_8h_a81d386ce9054b5221f458ae7be8bd178}{DAC\_RANGE}}\ ;\ \textcolor{comment}{//\ normalize\ to\ 8\ bits}}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00030}00030\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_a39dd617b3cde2eb25327b6c0213a7f36}{bit0}}\ =\ (dac-\/>\mbox{\hyperlink{structdac__t_af8f00468446d5b744b7e51d97ee36ed3}{digit\_v}}\ \&\ 0x01)\ >>\ 0;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00031}00031\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_a0b98e79f49804aab184fe554e2d10483}{bit1}}\ =\ (dac-\/>\mbox{\hyperlink{structdac__t_af8f00468446d5b744b7e51d97ee36ed3}{digit\_v}}\ \&\ 0x02)\ >>\ 1;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00032}00032\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_aa2484bf47c7c38a7eb8f2b22f09f6710}{bit2}}\ =\ (dac-\/>\mbox{\hyperlink{structdac__t_af8f00468446d5b744b7e51d97ee36ed3}{digit\_v}}\ \&\ 0x04)\ >>\ 2;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00033}00033\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_ae1457b2475c549e53d084a2daa6475f5}{bit3}}\ =\ (dac-\/>\mbox{\hyperlink{structdac__t_af8f00468446d5b744b7e51d97ee36ed3}{digit\_v}}\ \&\ 0x08)\ >>\ 3;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00034}00034\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_aec79d033d0709e9c4caf5b21f85848bc}{bit4}}\ =\ (dac-\/>\mbox{\hyperlink{structdac__t_af8f00468446d5b744b7e51d97ee36ed3}{digit\_v}}\ \&\ 0x10)\ >>\ 4;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00035}00035\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_a56012f9e5f78d285eb450866b270b86d}{bit5}}\ =\ (dac-\/>\mbox{\hyperlink{structdac__t_af8f00468446d5b744b7e51d97ee36ed3}{digit\_v}}\ \&\ 0x20)\ >>\ 5;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00036}00036\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_a39af6ce9105754718e17a87fb173b0fb}{bit6}}\ =\ (dac-\/>\mbox{\hyperlink{structdac__t_af8f00468446d5b744b7e51d97ee36ed3}{digit\_v}}\ \&\ 0x40)\ >>\ 6;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00037}00037\ \ \ \ \ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_a23364783b1302b0aab8b38fc7853cad3}{bit7}}\ =\ (dac-\/>\mbox{\hyperlink{structdac__t_af8f00468446d5b744b7e51d97ee36ed3}{digit\_v}}\ \&\ 0x80)\ >>\ 7;}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00039}00039\ \ \ \ \ \mbox{\hyperlink{dac_8c_a5fcbebf59884dae79d0974b4fdf16537}{dac\_output}}(dac);}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00040}00040\ \}}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00042}\mbox{\hyperlink{dac_8c_a5fcbebf59884dae79d0974b4fdf16537}{00042}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{dac_8c_a5fcbebf59884dae79d0974b4fdf16537}{dac\_output}}(\mbox{\hyperlink{structdac__t}{dac\_t}}\ *dac)}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00043}00043\ \{}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00044}00044\ \ \ \ \ \textcolor{keywordflow}{if}(!dac-\/>\mbox{\hyperlink{structdac__t_a6615bd80205b361bf6f3ffee9f537fd1}{en}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00046}00046\ \ \ \ \ gpio\_put(dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}}\ +\ 0,\ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_a39dd617b3cde2eb25327b6c0213a7f36}{bit0}});}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00047}00047\ \ \ \ \ gpio\_put(dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}}\ +\ 1,\ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_a0b98e79f49804aab184fe554e2d10483}{bit1}});}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00048}00048\ \ \ \ \ gpio\_put(dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}}\ +\ 2,\ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_aa2484bf47c7c38a7eb8f2b22f09f6710}{bit2}});}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00049}00049\ \ \ \ \ gpio\_put(dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}}\ +\ 3,\ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_ae1457b2475c549e53d084a2daa6475f5}{bit3}});}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00050}00050\ \ \ \ \ gpio\_put(dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}}\ +\ 4,\ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_aec79d033d0709e9c4caf5b21f85848bc}{bit4}});}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00051}00051\ \ \ \ \ gpio\_put(dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}}\ +\ 5,\ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_a56012f9e5f78d285eb450866b270b86d}{bit5}});}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00052}00052\ \ \ \ \ gpio\_put(dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}}\ +\ 6,\ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_a39af6ce9105754718e17a87fb173b0fb}{bit6}});}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00053}00053\ \ \ \ \ gpio\_put(dac-\/>\mbox{\hyperlink{structdac__t_aab9186e5a37c92d00b117298aa78f455}{gpio\_lsb}}\ +\ 7,\ dac-\/>\mbox{\hyperlink{structdac__t_ab674e8e9b22e8f41f88780faebce43bb}{BITS}}.\mbox{\hyperlink{structdac__t_a23364783b1302b0aab8b38fc7853cad3}{bit7}});}
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00054}00054\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{dac_8c_source_l00055}00055\ \}}

\end{DoxyCode}
